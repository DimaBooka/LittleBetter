{% extends "base.html" %}

{% block client_autobahn %}
    <script>
        window.onload = function() {
            var imgs = img_find();
            console.log(imgs);
            function img_find() {
                var imgs = document.getElementsByTagName("img");
                var imgSrcs = [];

                for (var i = 0; i < imgs.length; i++) {
                    imgSrcs.push(imgs[i].src);
                }
                return imgSrcs;
            }
            function isImageOk(img) {
                return !((!img.complete) || (typeof img.naturalWidth != "undefined" && img.naturalWidth == 0));
            }

            for (var i = 0; i < document.images.length; i++) {
                if (!isImageOk(document.images[i])) {
                    document.images[i].style.display = "none";
                }
            }
        };
    </script>
{% endblock %}

{% block content %}
    {% if pic %}
        <h3 style="padding-bottom: 25px">YOUR SEARCH RESULT</h3>

        <div class="hovergallery">
            {% for p in pic %}
                <a rel="simplebox" href="{{ p.url }}">
                <img class="shadow" width="50%" style="object-fit: cover; width:180px; height:180px;" src="{{ p.url }}" alt="{{ p.spider }}"></a>
            {% endfor %}
        </div>

        <div class="pagination">
            <span class="step-links">
                {% if pic.has_previous %}
                    <h4><a href="?page={{ pic.previous_page_number }}">Previous</a></h4>
                {% endif %}

                {% if pic.has_next %}
                    <h4><span class="current">
                        Page {{ pic.number }} of {{ pic.paginator.num_pages }}
                    </span></h4>
                    <h4><a href="?page={{ pic.next_page_number }}">Next</a></h4>
                {% else %}
                    <h3>That is all.</h3>
                {% endif %}
            </span>
        </div>


    {% else %}
        <h3>hmm... try another phrase</h3>
    {% endif %}
{% endblock %}